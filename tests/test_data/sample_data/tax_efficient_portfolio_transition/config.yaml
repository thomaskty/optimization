# Simple Tax-Efficient Portfolio Liquidation Configuration

model_name: "TE_SIMPLE"
model_id: "TE_001"
submission_id: "SUB_001"
model_type: "milp"
playbook_type: "tax_efficient_portfolio_transition"

# Data files
datasets:
  holdings: "tests/test_data/sample_data/tax_efficient_portfolio_transition/holdings.csv"
  acquisitions: "tests/test_data/sample_data/tax_efficient_portfolio_transition/purchase_history.csv"

# What to optimize
objective:
  function: "minimize_tax_liability"  # Or: maximize_capital_losses, minimize_short_term_gains, etc.

# Solver settings
optimizer_params:
  solver: "APOPT"
  remote: false
  time_limit: 600
  max_iter: 1000
  mip_gap: 0.01

# Tax rates and rules
tax_parameters:
  short_term_cg_rate: 0.37
  long_term_cg_rate: 0.20
  ordinary_income_offset_limit: 3000
  long_term_threshold_days: 365
  valuation_date: "2025-01-15"

constraints:
  # Ensure at least 90% of shares are sold for all securities
  - type: "range_shares_required"
    apply_to: "all"
    min_percentage: 0.9
    max_percentage: 0.9

    # override for specific securities
  - type: "range_shares_required"
    apply_to: [ "GOOGL" ]
    min_percentage: 1
    max_percentage: 1

  - type: "range_shares_required"
    apply_to: ['MSFT']
    min_percentage: 0.1
    max_percentage: 0.1

  - type: "max_total_capital_gains"
    max_gain: 20000

  - type: "max_short_term_gains"
    max_gain: 20000

  - type: "max_long_term_gains"
    max_gain: 40000

# Output settings
output:
  save_results: true
  formats: ["json", "csv"]
  directory: 'tests/test_outputs'

base_path: "."